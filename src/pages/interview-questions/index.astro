---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Breadcrumb from '../../components/ui/Breadcrumb.astro';
import InterviewQuestionCard from '../../components/cards/InterviewQuestionCard.astro';
import Badge from '../../components/ui/Badge.astro';
import { getCapability } from '../../lib/data';
import interviewData from '../../data/interview-questions.json';

const questions = interviewData as {
  id: string;
  capabilityId: string;
  question: string;
  level: string;
  questionType: string;
  followUps: string[];
  lookFor: string[];
  redFlags: string[];
}[];

const emQuestions = questions.filter(q => q.level === 'em');
const directorQuestions = questions.filter(q => q.level === 'director');
---

<BaseLayout title="Interview Questions" description="Behavioral, situational, and technical interview questions for EM and Director roles.">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <Breadcrumb items={[{ label: 'Interview Questions' }]} />

    <div class="mb-8">
      <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight mb-3">
        Interview Questions
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-400 mb-4">
        {questions.length} interview questions mapped to leadership capabilities. Each includes follow-ups, green flags, and red flags.
      </p>

      <div class="flex flex-wrap gap-2">
        <a href="/interview-questions/em/" class="badge bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800/40 transition-colors">
          EM ({emQuestions.length})
        </a>
        <a href="/interview-questions/director/" class="badge bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-800/40 transition-colors">
          Director ({directorQuestions.length})
        </a>
      </div>
    </div>

    <div class="space-y-3">
      {questions.map(q => {
        const cap = getCapability(q.capabilityId);
        return (
          <InterviewQuestionCard question={q} capabilityName={cap?.name} />
        );
      })}
    </div>
  </div>
</BaseLayout>
